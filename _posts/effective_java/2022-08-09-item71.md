---
title:  "필요 없는 검사 예외 사용은 피하라"
excerpt: \[Effective Java\] 필요 없는 검사 예외 사용은 피하라
categories:
  - effectiveJava
---

검사 예외를 제대로 활용하면 API와 프로그램의 질을 높일 수 있다. 그러나 검사 예외를 과하게 사용하면 오히려 쓰기 불편한 API가 된다.  
어떤 메서드가 검사 예외를 던질 수 있다고 선언됐다면, 이를 호출하는 코드에서 catch 블록을 두어 그 예외를 붙잡아 처리하거나 더 바깥으로 던져 문제를 전파해야만 한다. 어느 쪽이든 API 사용자에게 부담을 준다. 더구나 검사 예외를 던지는 메서드는 스트림 안에서 직접 사용할 수 없기 때문에 자바 8부터는 부담이 더욱 커졌다.  

API를 제대로 사용해도 발생할 수 있는 예외이거나, 프로그래머가 의미 있는 조치를 취할 수 있는 경우라면 검사 예외를 받아들일 수 있다. 그러나 둘 중 어디에도 해당하지 않는다면 비검사 예외를 사용하는 게 좋다.

## 검사 예외를 회피하는 방법

#### 옵셔널 반환
검사 예외를 던지는 대신 단순히 빈 옵셔널을 반환하면 된다. 이 방식의 단점은 예외가 발생한 이유를 알려주는 부가 정보를 담을 수 없다는 것이다.

#### 메서드를 2개로 쪼개 비검사 예외로 전환
첫 번째 메서드는 예외가 던져질지 여부를 boolean 값으로 반환한다.

  
```java
// 검사 예외를 던지는 메서드(리팩터링 전)
try {
    obj.action(args);
} catch (TheCheckedException e) {
    ...
}
```  

  
```java
// 상태 검사 메서드와 비검사 예외를 던지는 메서드(리팩터링 후)
if(obj.actionPermitted(args)) {
    obj.action(args);
} else {
    ...
}
```  

위 actionPermitted는 상태 검사 메서드에 해당하므로 외부 동기화 없이 여러 스레드가 동시에 접근할 수 있거나 외부 요인에 의해 상태가 변할 수 있다면 이 리팩터링은 적절하지 않다.

> 꼭 필요한 곳에만 사용한다면 검사 예외는 프로그램의 안정성을 높여주지만, 남용하면 쓰기 고통스러운 API를 낳는다. API 호출자가 예외 상황에서 복구할 방법이 없다면 비검사 예외를 던지자. 복구가 가능하고 호출자가 그 처리를 해주길 바란다면, 우선 옵셔널을 반환해도 될지 고민하자. 옵셔널만으로는 상황을 처리하기에 충분한 정보를 제공할 수 없을 때만 검사 예외를 던지자.